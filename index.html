<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HubSpot Report Hunter | AI-Powered Custom Reporting</title>
    <meta name="description"
        content="Discover and create HubSpot custom reports using AI. Select your properties and let OpenAI suggest the best reporting configurations.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>

<body>
    <div id="app" class="container">
        <header class="main-header">
            <div class="header-content">
                <div class="hubspot-logo">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M18.9,10.1c-1.2,0-2.1,0.9-2.1,2.1c0,0.2,0,0.4,0.1,0.6l-3,1.7c-0.4-0.4-1-0.7-1.7-0.7c-0.1,0-0.2,0-0.3,0l0-4.1 c0.8-0.3,1.4-1.1,1.4-2c0-1.2-1-2.2-2.2-2.2S8.9,6.5,8.9,7.7c0,0.9,0.5,1.7,1.3,2l0,4.1c-0.1,0-0.2,0-0.3,0c-0.7,0-1.3,0.3-1.7,0.7 l-3-1.7c0.1-0.2,0.1-0.4,0.1-0.6c0-1.2-1-2.1-2.1-2.1S1.1,11,1.1,12.2s1,2.1,2.1,2.1c0.7,0,1.3-0.3,1.7-0.8l3,1.7 c-0.1,0.2-0.1,0.4-0.1,0.6c0,1.2,1,2.2,2.2,2.2s2.2-1,2.2-2.2c0-0.2,0-0.4-0.1-0.6l3-1.7c0.4,0.5,1.1,0.8,1.8,0.8 c1.2,0,2.1-1,2.1-2.2S20.1,10.1,18.9,10.1z" />
                    </svg>
                    REPORT HUNTER
                </div>
                <h1>Generate Custom HubSpot Reports with AI</h1>
                <p class="subtitle">Connect your portal, pick your properties, and let
                    AI hunt down the best reporting insights for you.</p>
            </div>
            <button id="theme-toggle" class="btn theme-toggle">
                <span id="theme-toggle-icon">‚òÄÔ∏è</span>
                <span id="theme-toggle-text">Light Mode</span>
            </button>
        </header>

        <!-- Setup Phase -->
        <section id="setup-section" class="glass-card">
            <h3>Portal Configuration</h3>
            <div class="form-group">
                <label for="hubspot-token">HubSpot Private App Access Token</label>
                <input type="password" id="hubspot-token" placeholder="pat-na1-xxxx...">
            </div>
            <div class="form-group hidden">
                <label for="openai-key">OpenAI API Key (Optional if server-side configured)</label>
                <input type="password" id="openai-key" placeholder="sk-xxxx...">
            </div>
            <button id="connect-btn" class="btn btn-primary">
                Connect to HubSpot
            </button>
        </section>

        <!-- Object & Property Selection Phase -->
        <section id="selection-section" class="hidden">
            <div class="grid">
                <div class="glass-card">
                    <h3>1. Select Objects</h3>
                    <div id="object-list" class="form-group">
                        <!-- Populated dynamiclly -->
                    </div>
                    <button id="fetch-properties-btn" class="btn btn-primary" disabled>
                        Fetch Properties
                    </button>
                </div>

                <div class="glass-card">
                    <h3>2. Select Properties</h3>
                    <div class="form-group" style="display: flex; gap: 0.5rem;">
                        <input type="text" id="property-search" placeholder="Filter properties by name..."
                            style="flex: 2;">
                        <select id="group-filter" style="flex: 1;">
                            <option value="">All Groups</option>
                        </select>
                    </div>
                    <div style="margin-bottom: 1rem; display: flex; justify-content: flex-end; gap: 0.5rem;">
                        <button id="clear-all-selected" class="btn"
                            style="padding: 0.4rem 0.8rem; font-size: 0.8rem; background: rgba(255,122,89,0.1); border: 1px solid rgba(255,122,89,0.3); color: var(--primary);">
                            Clear All
                        </button>
                        <button id="select-all-visible" class="btn"
                            style="padding: 0.4rem 0.8rem; font-size: 0.8rem; background: rgba(255,255,255,0.05); border: 1px solid var(--border-color);">
                            Select All Visible
                        </button>
                    </div>
                    <div id="property-list-container" class="property-list">
                        <!-- Populated dynamically -->
                    </div>
                    <div style="margin-top: 1rem;">
                        <span id="selected-count" class="selected-badge">0 properties selected</span>
                    </div>
                    <button id="start-journey-btn" class="btn btn-primary" style="margin-top: 1.5rem;" disabled>
                        <span>üé¨ Start Reporting Journey</span>
                    </button>
                </div>
            </div>
        </section>

        <!-- Story Phase (COYA) -->
        <section id="story-section" class="hidden" style="margin-top: 2rem;">
            <div class="glass-card">
                <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1.5rem;">
                    <span style="font-size: 2rem;">üó∫Ô∏è</span>
                    <div>
                        <h2 style="margin: 0;">Choose Your Reporting Path</h2>
                        <p style="color: var(--text-dim); margin: 0;">Tell a story with your data. Point and click to
                            define your audience and goals.</p>
                    </div>
                </div>

                <div id="story-steps-container">
                    <!-- Dynamic story choices like Audience, Goal, Timeframe -->
                </div>

                <div id="story-final-btn-container" class="hidden"
                    style="margin-top: 2rem; border-top: 1px solid var(--border-color); padding-top: 1.5rem;">
                    <button id="get-suggestions-btn" class="btn btn-primary"
                        style="width: 100%; justify-content: center; font-size: 1.1rem; padding: 1rem;">
                        <span>ü™Ñ Hunt for up to 20 Story-Driven Reports</span>
                    </button>
                </div>
            </div>
        </section>

        <!-- Result Phase -->
        <section id="results-section" class="hidden" style="margin-top: 2rem;">
            <div class="glass-card">
                <h2>AI Suggested Reports</h2>
                <div id="suggestions-container">
                    <!-- Suggested report cards -->
                </div>
            </div>
        </section>

        <div id="loader" class="hidden"
            style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 1000; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 1rem;">
            <div class="loading-spinner"></div>
            <p id="loader-text">Analyzing Properties...</p>
        </div>

        <!-- Auth Section -->
        <div id="auth-overlay" class="auth-overlay">
            <div class="auth-card">
                <div id="login-form">
                    <h2 style="margin-bottom: 0.5rem;">Welcome Back</h2>
                    <p style="color: var(--text-dim); margin-bottom: 1.5rem; font-size: 0.9rem;">Sign in to your Report
                        Hunter account</p>
                    <div class="form-group">
                        <label>Email Address</label>
                        <input type="text" id="login-email" placeholder="you@company.com">
                    </div>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" id="login-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                    </div>
                    <button id="login-btn" class="btn btn-primary" style="width: 100%; justify-content: center;">
                        Sign In
                    </button>
                    <p style="margin-top: 1.5rem; text-align: center; font-size: 0.85rem;">
                        Don't have an account? <a href="#" id="show-signup"
                            style="color: var(--primary); text-decoration: none; font-weight: 600;">Create one</a>
                    </p>
                </div>
                <div id="signup-form" class="hidden">
                    <h2 style="margin-bottom: 0.5rem;">Create Account</h2>
                    <p style="color: var(--text-dim); margin-bottom: 1.5rem; font-size: 0.9rem;">Start hunting for
                        reporting insights</p>
                    <div class="form-group">
                        <label>Email Address</label>
                        <input type="text" id="signup-email" placeholder="you@company.com">
                    </div>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" id="signup-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                    </div>
                    <div class="form-group">
                        <label>Confirm Password</label>
                        <input type="password" id="signup-confirm-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                    </div>
                    <div class="form-group">
                        <label>Verify you are human</label>
                        <div style="display: flex; gap: 1rem; align-items: center; margin-bottom: 0.5rem;">
                            <div id="captcha-container"
                                style="background: #f0f0f0; border-radius: 4px; height: 40px; flex: 1; display: flex; align-items: center; justify-content: center; overflow: hidden; cursor: pointer;"
                                title="Click to refresh">
                                <!-- Captcha SVG will be loaded here -->
                            </div>
                            <input type="text" id="signup-captcha" placeholder="Enter code" style="width: 120px;">
                        </div>
                        <small style="color: var(--text-dim); display: block; margin-top: -0.25rem;">Click the image to
                            refresh</small>
                    </div>
                    <button id="signup-btn" class="btn btn-primary"
                        style="width: 100%; justify-content: center; margin-top: 1rem;">
                        Create Account
                    </button>
                    <p style="margin-top: 1.5rem; text-align: center; font-size: 0.85rem;">
                        Already have an account? <a href="#" id="show-login"
                            style="color: var(--primary); text-decoration: none; font-weight: 600;">Sign in</a>
                    </p>
                </div>
            </div>
        </div>

        <!-- Floating Profile Menu -->
        <button id="floating-menu-btn" class="floating-menu-btn hidden">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                <circle cx="12" cy="7" r="4"></circle>
            </svg>
        </button>

        <div id="drawer-overlay" class="drawer-overlay"></div>
        <div id="profile-drawer" class="profile-drawer">
            <div class="drawer-header">
                <h3 style="margin: 0;">Profile & Settings</h3>
                <button id="close-drawer" class="btn"
                    style="padding: 0.4rem; border: none; background: none;">‚úï</button>
            </div>
            <div class="form-group">
                <label>Logged in as</label>
                <div id="user-email-display" style="font-weight: 600; color: var(--text-main);">...</div>
            </div>
            <hr style="margin: 1.5rem 0; border: 0; border-top: 1px solid var(--border-color);">
            <div class="form-group">
                <label for="profile-hubspot-token">HubSpot Token</label>
                <input type="password" id="profile-hubspot-token" placeholder="pat-na1-xxxx...">
                <p style="font-size: 0.75rem; color: var(--text-dim); margin-top: 0.5rem;">This token is saved to your
                    account and loaded automatically.</p>
            </div>
            <button id="save-profile-btn" class="btn btn-primary"
                style="width: 100%; justify-content: center; margin-bottom: 1rem;">
                Save Profile
            </button>
            <button id="reset-session-btn" class="btn"
                style="width: 100%; justify-content: center; margin-bottom: 1rem; color: #ff4d4d; border-color: rgba(255,77,77,0.3);">
                Reset Session Data
            </button>
            <button id="logout-btn" class="btn"
                style="width: 100%; justify-content: center; background: rgba(255,255,255,0.05);">
                Logout
            </button>
        </div>
    </div>
    <script type="module" src="/src/main.js"></script>
</body>

</html>